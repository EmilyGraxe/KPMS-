{% extends 'invApp/layout.html' %}
{% load static %}

{% block title %}Category List {% endblock %}
{% block content %}
<h2 class="text-center">Category List</h2>
<form method="get">
    <select name="category" onchange="this.form.submit()">
        <option value="">--Choose a category--</option>
        {% for cat in categories %}
            <option value="{{ cat}}" {% if cat == selected_category %}selected{% endif %}>
                {{ cat }}
            </option>
        {% endfor %}
    </select>
</form>

{% if products %}
    <h3>Products for {{ selected_category }}:</h3>
    <table class="table table-bordered table-striped">
      <thead class="thead-dark">
         <tr>
            <th>Name</th>
            <th>Category</th>
            <th>Price</th>
            <th>Quantity</th>
          </tr>
       </thead>
       <tbody>
        {% for product in products %}
            <tr>
                <td>{{ product.name }}</td>
                <td>{{ product.category }}</td>
                <td>{{ product.price }}</td>
                <td>{{ product.quantity }}</td>
            </tr>
            {%empty%}
        <tr>
            <td colspan="4">No products found for the selected category.</td>
        </tr>
        {% endfor %}
       </tbody>
        
       
    </table>

{% endif %}
{% endblock %}